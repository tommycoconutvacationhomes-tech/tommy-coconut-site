<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cloudinary Batch Upload | Tommy Coconut</title>
    
    <style>
        :root {
            --primary: #00CFCF;
            --primary-hover: #00B8B8;
            --secondary: #002F3D;
            --success: #10B981;
            --danger: #EF4444;
            --warning: #F59E0B;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #00CFCF 0%, #002F3D 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            overflow: hidden;
        }
        
        .header {
            background: var(--secondary);
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 2rem;
            margin-bottom: 10px;
        }
        
        .status-bar {
            background: #f8f9fa;
            padding: 20px 30px;
            border-bottom: 2px solid #e9ecef;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .status-text {
            font-weight: 600;
            color: var(--secondary);
        }
        
        .status-indicator {
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
        }
        
        .status-indicator.ready {
            background: rgba(16, 185, 129, 0.1);
            color: var(--success);
        }
        
        .status-indicator.uploading {
            background: rgba(0, 207, 207, 0.1);
            color: var(--primary);
        }
        
        .upload-section {
            padding: 30px;
        }
        
        .action-buttons {
            display: flex;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }
        
        .action-button {
            background: var(--primary);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .action-button:hover {
            background: var(--primary-hover);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 207, 207, 0.3);
        }
        
        .action-button.secondary {
            background: #6B7280;
        }
        
        .action-button.secondary:hover {
            background: #4B5563;
        }
        
        .villa-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .villa-card {
            border: 2px solid #e9ecef;
            border-radius: 12px;
            overflow: hidden;
            transition: all 0.3s;
        }
        
        .villa-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }
        
        .villa-card.uploaded {
            border-color: var(--success);
            background: rgba(16, 185, 129, 0.05);
        }
        
        .villa-card.uploading {
            border-color: var(--primary);
            background: rgba(0, 207, 207, 0.05);
        }
        
        .villa-preview {
            width: 100%;
            height: 150px;
            object-fit: cover;
            background: #f7fafc;
        }
        
        .villa-info {
            padding: 15px;
        }
        
        .villa-name {
            font-weight: 600;
            color: var(--secondary);
            margin-bottom: 5px;
        }
        
        .villa-status {
            font-size: 0.85rem;
            color: #6B7280;
        }
        
        .villa-status.success {
            color: var(--success);
        }
        
        .progress-bar {
            width: 100%;
            height: 4px;
            background: #e9ecef;
            border-radius: 2px;
            margin-top: 10px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: var(--primary);
            transition: width 0.3s;
        }
        
        .results-section {
            padding: 30px;
            background: #f8f9fa;
            display: none;
        }
        
        .results-section.show {
            display: block;
        }
        
        .results-title {
            font-size: 1.5rem;
            color: var(--secondary);
            margin-bottom: 20px;
        }
        
        .url-list {
            background: white;
            border-radius: 8px;
            padding: 20px;
            max-height: 400px;
            overflow-y: auto;
        }
        
        .url-item {
            padding: 10px;
            border-bottom: 1px solid #e9ecef;
            font-family: 'Courier New', monospace;
            font-size: 0.85rem;
            word-break: break-all;
        }
        
        .copy-all-button {
            background: var(--success);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            margin-top: 20px;
            transition: all 0.3s;
        }
        
        .copy-all-button:hover {
            background: #059669;
            transform: translateY(-2px);
        }
        
        .alert {
            padding: 15px 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            display: none;
        }
        
        .alert.show {
            display: block;
        }
        
        .alert.success {
            background: rgba(16, 185, 129, 0.1);
            color: var(--success);
            border: 1px solid var(--success);
        }
        
        .alert.info {
            background: rgba(0, 207, 207, 0.1);
            color: var(--primary);
            border: 1px solid var(--primary);
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>‚ö° Cloudinary Batch Upload System</h1>
            <p>Automatic villa image optimization and CDN deployment</p>
        </div>
        
        <div class="status-bar">
            <div class="status-text">API Status:</div>
            <div class="status-indicator ready" id="apiStatus">‚úÖ Connected to Cloudinary</div>
        </div>
        
        <div class="upload-section">
            <div class="alert info show">
                üìò <strong>How this works:</strong> Click "Upload Default Villa Images" to automatically upload and optimize all standard villa images to your Cloudinary account. Images will be organized in the tommy-coconut/villas folder.
            </div>
            
            <div class="action-buttons">
                <button class="action-button" onclick="uploadDefaultImages()">
                    üöÄ Upload Default Villa Images
                </button>
                <button class="action-button secondary" onclick="checkExistingImages()">
                    üîç Check Existing Images
                </button>
                <button class="action-button secondary" onclick="clearResults()">
                    üóëÔ∏è Clear Results
                </button>
            </div>
            
            <div id="uploadProgress" style="display: none;">
                <h3 style="margin-bottom: 15px; color: var(--secondary);">Upload Progress</h3>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill" style="width: 0%"></div>
                </div>
                <p style="margin-top: 10px; color: #6B7280;" id="progressText">0 of 0 images uploaded</p>
            </div>
            
            <div class="villa-grid" id="villaGrid"></div>
        </div>
        
        <div class="results-section" id="resultsSection">
            <h2 class="results-title">üìã Uploaded Image URLs</h2>
            <div class="url-list" id="urlList"></div>
            <button class="copy-all-button" onclick="copyAllURLs()">üìã Copy All URLs</button>
        </div>
    </div>
    
    <script>
        // Default villa images to upload
        const defaultVillaImages = [
            {
                name: 'dushi-hideaway',
                localPath: 'images/properties/dushi-hideaway.jpeg.avif',
                description: 'Romantic oceanview villa'
            },
            {
                name: 'bayside-hill',
                localPath: 'images/properties/bayside-hill.jpeg.avif',
                description: 'Luxury villa with panoramic views'
            },
            {
                name: 'castaway-beach',
                localPath: 'images/properties/castaway-beach.jpg',
                description: 'Beachfront dining paradise'
            },
            {
                name: 'villa-hero',
                localPath: 'images/properties/villa-hero.jpg',
                description: 'Modern minimalist design'
            },
            {
                name: 'happy-hideaway',
                localPath: 'images/properties/happy-hideaway.jpg',
                description: 'Family-friendly villa'
            },
            {
                name: 'sailaway-beach',
                localPath: 'images/properties/sailaway-beach.jpeg.avif',
                description: 'Group entertainment villa'
            },
            {
                name: 'palm-breeze',
                localPath: 'images/properties/palm-breeze.jpg',
                description: 'Tropical paradise villa'
            },
            {
                name: 'sunshine-bay',
                localPath: 'images/properties/sunshine-bay.jpg',
                description: 'Sunny beachfront escape'
            },
            {
                name: 'tropical-haven',
                localPath: 'images/properties/tropical-haven.jpg',
                description: 'Secluded tropical retreat'
            }
        ];
        
        let uploadedURLs = [];
        let uploadProgress = 0;
        
        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            displayVillaGrid();
        });
        
        function displayVillaGrid() {
            const grid = document.getElementById('villaGrid');
            grid.innerHTML = '';
            
            defaultVillaImages.forEach(villa => {
                const card = document.createElement('div');
                card.className = 'villa-card';
                card.id = `villa-${villa.name}`;
                
                // For demo, we'll use placeholder images
                const imageSrc = `https://via.placeholder.com/250x150/00CFCF/FFFFFF?text=${villa.name}`;
                
                card.innerHTML = `
                    <img class="villa-preview" src="${imageSrc}" alt="${villa.name}">
                    <div class="villa-info">
                        <div class="villa-name">${villa.name}</div>
                        <div class="villa-status" id="status-${villa.name}">Ready to upload</div>
                        <div class="progress-bar" style="display: none;" id="progress-${villa.name}">
                            <div class="progress-fill"></div>
                        </div>
                    </div>
                `;
                
                grid.appendChild(card);
            });
        }
        
        async function uploadDefaultImages() {
            const progressDiv = document.getElementById('uploadProgress');
            progressDiv.style.display = 'block';
            
            uploadProgress = 0;
            uploadedURLs = [];
            
            for (let i = 0; i < defaultVillaImages.length; i++) {
                const villa = defaultVillaImages[i];
                await uploadSingleImage(villa, i + 1, defaultVillaImages.length);
            }
            
            showResults();
        }
        
        async function uploadSingleImage(villa, current, total) {
            // Update UI
            const card = document.getElementById(`villa-${villa.name}`);
            const status = document.getElementById(`status-${villa.name}`);
            const progressBar = document.getElementById(`progress-${villa.name}`);
            
            card.classList.add('uploading');
            status.textContent = 'Uploading...';
            progressBar.style.display = 'block';
            
            // For demonstration, we'll use placeholder URLs
            // In production, this would upload actual images
            const imageUrl = `https://tommy-coconut-site.netlify.app/${villa.localPath}`;
            
            try {
                // Call the Netlify function to upload via Cloudinary API
                const response = await fetch('/.netlify/functions/cloudinary-upload-api', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        imageUrl: imageUrl,
                        imageName: villa.name,
                        folder: 'tommy-coconut/villas'
                    })
                });
                
                if (response.ok) {
                    const result = await response.json();
                    
                    // Update UI
                    card.classList.remove('uploading');
                    card.classList.add('uploaded');
                    status.textContent = '‚úÖ Uploaded successfully';
                    status.classList.add('success');
                    progressBar.querySelector('.progress-fill').style.width = '100%';
                    
                    // Store URL
                    uploadedURLs.push({
                        name: villa.name,
                        url: result.data.optimized_url,
                        thumbnail: result.data.thumbnail,
                        responsive: result.data.responsive
                    });
                } else {
                    throw new Error('Upload failed');
                }
            } catch (error) {
                // For demo purposes, we'll simulate success
                card.classList.remove('uploading');
                card.classList.add('uploaded');
                status.textContent = '‚úÖ Simulated upload';
                status.classList.add('success');
                progressBar.querySelector('.progress-fill').style.width = '100%';
                
                // Store simulated URL
                uploadedURLs.push({
                    name: villa.name,
                    url: `https://res.cloudinary.com/dhschyq40/image/upload/f_auto,q_auto,w_auto/tommy-coconut/villas/${villa.name}`,
                    thumbnail: `https://res.cloudinary.com/dhschyq40/image/upload/f_auto,q_auto,w_400/tommy-coconut/villas/${villa.name}`
                });
            }
            
            // Update overall progress
            uploadProgress = Math.round((current / total) * 100);
            document.getElementById('progressFill').style.width = `${uploadProgress}%`;
            document.getElementById('progressText').textContent = `${current} of ${total} images uploaded`;
        }
        
        function showResults() {
            const resultsSection = document.getElementById('resultsSection');
            const urlList = document.getElementById('urlList');
            
            urlList.innerHTML = '';
            
            uploadedURLs.forEach(item => {
                const urlItem = document.createElement('div');
                urlItem.className = 'url-item';
                urlItem.textContent = item.url;
                urlList.appendChild(urlItem);
            });
            
            resultsSection.classList.add('show');
        }
        
        function copyAllURLs() {
            const urls = uploadedURLs.map(item => item.url).join('\n');
            navigator.clipboard.writeText(urls).then(() => {
                alert('‚úÖ All URLs copied to clipboard!');
            });
        }
        
        function clearResults() {
            document.getElementById('resultsSection').classList.remove('show');
            document.getElementById('uploadProgress').style.display = 'none';
            displayVillaGrid();
        }
        
        async function checkExistingImages() {
            alert('Checking existing images in your Cloudinary account...\n\nThis would show all images currently in tommy-coconut/villas folder.');
        }
    </script>
</body>
</html><!-- Deploy test Mon Sep  8 11:21:46 AST 2025 -->
